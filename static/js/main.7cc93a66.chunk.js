(this.webpackJsonpappp=this.webpackJsonpappp||[]).push([[0],[,,function(e,t){e.exports={markeryBar:{geojson:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[22.005686,50.037118]},properties:{title:"Corner pub Rzesz\xf3w",description:"Pub z pegazusem i dobrym piwem."}},{type:"Feature",geometry:{type:"Point",coordinates:[22.003853,50.038123]},properties:{title:"Cybermachina",description:"Konsole, plansz\xf3wki, cosplay i alkohol."}},{type:"Feature",geometry:{type:"Point",coordinates:[22.001335,50.03622]},properties:{title:"Hokuspokus",description:"W\u0142oska, ameryka\u0144ska i meksyka\u0144ska kuchnia."}},{type:"Feature",geometry:{type:"Point",coordinates:[22.003245,50.036338]},properties:{title:"Manufkatura",description:"Najwi\u0119kszy w Polsce browar restauracyjny"}}]}},markeryZjedz:{geojson:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[22.006207,50.036881]},properties:{title:"Piwa \u015awiata",description:"Sklep z piwami kraftowymi."}},{type:"Feature",geometry:{type:"Point",coordinates:[22.003789,50.03813]},properties:{title:"KukNuk",description:"Kuchnia nowoczesna."}},{type:"Feature",geometry:{type:"Point",coordinates:[21.999612,50.038412]},properties:{title:"Osteria Bellannuna",description:"Kuchnia w\u0142oska."}},{type:"Feature",geometry:{type:"Point",coordinates:[22.002863,50.039861]},properties:{title:"Dara kebab",description:"Kebab \ud83d\ude00"}},{type:"Feature",geometry:{type:"Point",coordinates:[22.017859,50.029875]},properties:{title:"PizzaEPasta",description:"Pizza i makaron"}}]}},markeryZobacz:{geojson:{type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[22.014375,50.030625]},properties:{title:"Uniwersytet Rzeszowski",description:"G\u0142\xf3wny budynek kolegium przyrodniczego URZ."}},{type:"Feature",geometry:{type:"Point",coordinates:[21.999444,50.040985]},properties:{title:"Pomnik czynu rewolucyjnego",description:"Najbardziej znany pomnik w Rzeszowie."}},{type:"Feature",geometry:{type:"Point",coordinates:[21.996178,50.0223]},properties:{title:"Stadion stal",description:"Stadion Miejski Stal w Rzeszowie."}},{type:"Feature",geometry:{type:"Point",coordinates:[22.000248,50.032607]},properties:{title:"Zamek Lubomirskich",description:"Jeden z g\u0142\xf3wnych zabytk\xf3w w Rzeszowie wybudowany w latach 1902-1906."}},{type:"Feature",geometry:{type:"Point",coordinates:[50.042461,21.998271]},properties:{title:"Galeria Rzesz\xf3w",description:"Najwi\u0119kszy centrum handlowe w woj. podkarpackim."}}]}},layerToAdd:["22.006207,50.036881;22.003789,50.038130;21.999612,50.038412;22.002863,50.039861;22.017859,50.029875;22.006207,50.036881","22.014375,50.030625;21.999444,50.040985;21.996178,50.022300;22.000248,50.032607;21.998271,50.042461;22.014375,50.030625","22.005686,50.037118;22.003853,50.038123;22.001335,50.036220;22.003245,50.036338;22.005686,50.037118"]}},,,,,,,,,function(e,t,o){e.exports=o(19)},,,,,function(e,t,o){},function(e,t,o){e.exports=o.p+"static/media/logo.5d5d9eef.svg"},function(e,t,o){},function(e,t,o){"use strict";o.r(t);var a=o(0),n=o.n(a),r=o(5),i=o.n(r),s=(o(16),o(6)),c=o(7),l=o(9),u=o(8),d=o(3),p=o(10),m=(o(17),o(1)),y=o.n(m),g=(o(18),o(2));y.a.accessToken="pk.eyJ1IjoicGtwazciLCJhIjoiY2s0MGExaTdhMDB3YTNkbnlsc2dxbmFlZSJ9.SyulIR86ATGSgywlKKMnkA";var h=function(e){function t(e){var o;return Object(s.a)(this,t),(o=Object(l.a)(this,Object(u.a)(t).call(this,e))).dissapear=o.dissapear.bind(Object(d.a)(o)),o.componentDidMount=o.componentDidMount.bind(Object(d.a)(o)),o.dissapearNearPlaces=o.dissapearNearPlaces.bind(Object(d.a)(o)),o.buttonPressed=o.buttonPressed.bind(Object(d.a)(o)),o.state={lng:21.991193,lat:50.04152,zoom:12,showOutsideOfRzeszowDiv:!1,travelTime:0,showTravelTimeDiv:!1,position:{lng:0,lat:0},coordinatesOfTheMarkerToDraw:void 0,cacheMarker:void 0,showTheNearPlaces:!1,nearPlacesString:"",firstRoute:{show:!1,number:0},secondRoute:{show:!1,number:1},thirdRoute:{show:!1,number:2}},o}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=new y.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v11",center:[this.state.lng,this.state.lat],zoom:this.state.zoom,maxBounds:[[21.857297,49.928937],[22.101056,50.081192]]});t.on("move",(function(){e.setState({lng:t.getCenter().lng.toFixed(4),lat:t.getCenter().lat.toFixed(4),zoom:t.getZoom().toFixed(2)})}));var o=new y.a.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0});t.addControl(o);var a,n={latitude:0,longitude:0},r=!0,i={coordinates:a,type:"LineString"},s=g.markeryBar.geojson.features.concat(g.markeryZjedz.geojson.features,g.markeryZobacz.geojson.features),c=!0,l=!1,u=void 0;try{for(var d,p=s[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var m=d.value;console.log(m.geometry.coordinates[0])}}catch(z){l=!0,u=z}finally{try{c||null==p.return||p.return()}finally{if(l)throw u}}o.on("outofmaxbounds",(function(){e.setState({showOutsideOfRzeszowDiv:!0})}));var h="";o.on("geolocate",(function(o){n.latitude=o.coords.latitude,n.longitude=o.coords.longitude,console.log("wykonuje sie czesto"),console.log(e.state.position.lat+" "+e.state.position.lng),console.log(n.latitude+" "+n.longitude),"undefined"!==typeof e.state.coordinatesOfTheMarkerToDraw&&"mapboxgl-ctrl-geolocate"!==document.getElementsByTagName("button")[0].className&&f(),e.setState({nearPlacesString:""}),s.forEach((function(t){Math.abs(n.latitude-t.geometry.coordinates[1])<6e-4&&Math.abs(n.longitude-t.geometry.coordinates[0])<6e-4&&(console.log("popop"),e.setState({nearPlacesString:e.state.nearPlacesString+"'"+t.properties.title+"' "}))})),e.state.nearPlacesString!==h&&e.setState({showTheNearPlaces:!0}),h=e.state.nearPlacesString,(Math.abs(e.state.position.lat-n.latitude)>8e-5||Math.abs(e.state.position.lng-n.longitude)>8e-5)&&(console.log("WENWA"),r?(a=[[n.longitude,n.latitude]],i.coordinates=a,r=!1,function(e,o){t.addLayer({id:e,type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:o}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#888","line-width":8,"line-opacity":.8}})}("routeUser",i),e.setState({position:{lng:n.longitude,lat:n.latitude}})):(a.push([n.longitude,n.latitude]),i.coordinates=a,t.getSource("routeUser").setData(i),e.setState({position:{lng:n.longitude,lat:n.latitude}})),e.setState({pozycja:{lng:n.longitude,lat:n.latitude}}))})),k(g.markeryZjedz,"markerZjedz"),k(g.markeryZobacz,"markerZobacz"),k(g.markeryBar,"markerBar"),t.on("load",(function(){g.layerToAdd.forEach((function(e,o){var a="https://api.mapbox.com/directions/v5/mapbox/driving/"+e+"?geometries=geojson&steps=true&&access_token="+y.a.accessToken,n=new XMLHttpRequest;n.responseType="json",n.open("GET",a,!0),n.onload=function(){var e=n.response.routes[0].geometry;console.log(e),function(e){var a="";0===o&&(a="#e68580"),1===o&&(a="#329999"),2===o&&(a="#db9000"),w("route"+o,e,a,.8),t.setLayoutProperty("route"+o,"visibility","none")}(e)},n.send()})),setInterval((function(){for(var o=0,a=[e.state.firstRoute,e.state.secondRoute,e.state.thirdRoute];o<a.length;o++){var n=a[o];t.getLayer("route"+n.number)&&(n.show?t.setLayoutProperty("route"+n.number,"visibility","visible"):t.setLayoutProperty("route"+n.number,"visibility","none"))}"mapboxgl-ctrl-geolocate"==document.getElementsByTagName("button")[0].className?(t.getLayer("droga")&&t.setLayoutProperty("droga","visibility","none"),e.setState({showTravelTimeDiv:!1})):t.getLayer("droga")&&(t.setLayoutProperty("droga","visibility","visible"),e.setState({showTravelTimeDiv:!0}))}),100)}));var b=!0,f=function(){var o="https://api.mapbox.com/directions/v5/mapbox/driving-traffic/"+e.state.coordinatesOfTheMarkerToDraw[0]+","+e.state.coordinatesOfTheMarkerToDraw[1]+";"+n.longitude+","+n.latitude+"?geometries=geojson&steps=true&&access_token="+y.a.accessToken;console.log(e.state.coordinatesOfTheMarkerToDraw[0]+","+e.state.coordinatesOfTheMarkerToDraw[1]+";"+n.longitude+","+n.latitude+"AAAAAAAAAAAAAAAAAAAAAAAAA");var a=new XMLHttpRequest;a.responseType="json",a.open("GET",o,!0),a.onload=function(){var o,n=a.response;o=a.response.routes[0].duration,e.setState({travelTime:o}),e.setState({showTravelTimeDiv:!0});var r=n.routes[0].geometry;console.log(r),function(e){b&&w("droga",e,"#3b9ddd",.8);b=!1,t.getSource("droga").setData(e)}(r)},a.send()};function w(e,o,a,n){t.addLayer({id:e,type:"line",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:o}},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":a,"line-width":8,"line-opacity":n}})}var v=function(t){"mapboxgl-ctrl-geolocate"!==document.getElementsByTagName("button")[0].className&&(e.setState({coordinatesOfTheMarkerToDraw:t.geometry.coordinates}),f())};function k(e,o){e.geojson.features.forEach((function(e){var a=document.createElement("div");a.className=o,a.onclick=function(){v(e)},new y.a.Marker(a).setLngLat(e.geometry.coordinates).setPopup(new y.a.Popup({offset:25}).setHTML("<h3>"+e.properties.title+"</h3><p>"+e.properties.description+"</p>")).addTo(t)}))}}},{key:"dissapear",value:function(){this.setState({appear:!0}),document.getElementById("miejsce").remove()}},{key:"dissapearNearPlaces",value:function(){this.setState({showTheNearPlaces:!1})}},{key:"buttonPressed",value:function(e){0===e&&(0==this.state.firstRoute.show?(this.setState({firstRoute:{show:!0,number:0}}),document.getElementById("buttonZjedz").className="zjedzPrzyciskPressed"):(this.setState({firstRoute:{show:!1,number:0}}),document.getElementById("buttonZjedz").className="zjedzPrzycisk")),1===e&&(0==this.state.secondRoute.show?(this.setState({secondRoute:{show:!0,number:1}}),document.getElementById("buttonZobacz").className="zobaczPrzyciskPressed"):(this.setState({secondRoute:{show:!1,number:1}}),document.getElementById("buttonZobacz").className="zobaczPrzycisk")),2===e&&(0==this.state.thirdRoute.show?(this.setState({thirdRoute:{show:!0,number:2}}),document.getElementById("buttonBar").className="barPrzyciskPressed"):(this.setState({thirdRoute:{show:!1,number:2}}),document.getElementById("buttonBar").className="barPrzycisk"))}},{key:"render",value:function(){var e=this;return n.a.createElement("div",null,this.state.showTravelTimeDiv?n.a.createElement("div",{className:"info-box"},n.a.createElement("p",null,"Podr\xf3\u017c zajmie ",Math.round(this.state.travelTime/60*100)/100," minut")):n.a.createElement("div",null),this.state.showOutsideOfRzeszowDiv?n.a.createElement("div",{id:"miejsce",className:"sidebarStyle",onClick:this.dissapear},n.a.createElement("div",null,"Jeste\u015b poza Rzeszowem, niekt\xf3re funkcjonalno\u015bci mog\u0105 nie dzia\u0142a\u0107!")):n.a.createElement("div",null),this.state.showTheNearPlaces&&""!==this.state.nearPlacesString?n.a.createElement("div",{onClick:this.dissapearNearPlaces,className:"near-places"},"Jeste\u015b w pobli\u017cu ",this.state.nearPlacesString):n.a.createElement("div",null),n.a.createElement("div",{ref:function(t){return e.mapContainer=t},className:"mapContainer"}),n.a.createElement("div",{id:"buttonBar",className:"barPrzycisk",onClick:function(){return e.buttonPressed(2)}}),n.a.createElement("div",{id:"buttonZobacz",className:"zobaczPrzycisk",onClick:function(){return e.buttonPressed(1)}}),n.a.createElement("div",{id:"buttonZjedz",className:"zjedzPrzycisk",onClick:function(){return e.buttonPressed(0)}}))}}]),t}(a.Component),b=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function f(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var o=e.installing;null!=o&&(o.onstatechange=function(){"installed"===o.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(n.a.createElement(h,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");b?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(o){var a=o.headers.get("content-type");404===o.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):f(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):f(t,e)}))}}()}],[[11,1,2]]]);
//# sourceMappingURL=main.7cc93a66.chunk.js.map